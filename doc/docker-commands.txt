docker build -t products . -f .\msvc.products\Dockerfile
docker build -t users . -f .\msvc.users\Dockerfile

docker network create spring

docker tag finconecta-msvc-users mfernandez4060/finconecta-msvc-users  
docker tag finconecta-msvc-products mfernandez4060/finconecta-msvc-products

docker push mfernandez4060/finconecta-msvc-users  
docker push mfernandez4060/finconecta-msvc-products



minikube:
minikube start --driver=hyperv

kubectl describe pods
kubectl get deployments
kubectl delete deployment bla
kubectl create deployment mysql8 --image=mysql:8 --port=3306 --dry-run=client -o yaml > deployment-mysql.yaml
kubectl apply -f .\deployment-mongodatabase.yaml
kubectl get pods
kubectl get all
kubectl logs msvc-users-5775676c8-wv8db
kubectl create deployment mongodatabase --image=mongo:5 --port=27017 --dry-run=client -o yaml > deployment-mongodatabase.yaml
kubectl apply -f .\deployment-mongodatabase.yaml
deployment.apps/mongodatabase created
kubectl create deployment msvc-users --image=mfernandez4060/finconecta-msvc-users --port=8001 --dry-run=client -o yaml > deployment-msvc-users.yaml
kubectl apply -f .\deployment-msvc-users.yaml
kubectl describe  pod/msvc-users-84ddbb8b68-ds4dq
kubectl expose deployment msvc-users --port=8001 --type=LoadBalancer
kubectl get services
minikube service msvc-users --url
minikube service msvc-products --url
kubectl set image deployment msvc-users users=mfernandez4060/finconecta-msvc-users:latest
kubectl create deployment msvc-users --image=mfernandez4060/finconecta-msvc-users --port=8001 --dry-run=client -o yaml > deployment-msvc-users.yaml
kubectl get service msvc-users -o yaml > service-users.yaml

kubectl delete -f .\deployment-msvc-users.yaml
kubectl apply -f .\deployment-msvc-users.yaml
kubectl apply -f .\deployment-msvc-products.yaml -f .\service-msvc-products.yaml
kubectl exec pod/postgres14-67d9fd6889-khl78-f7j5n -i -t -- bash -il

kubectl describe pod mongodatabase-c8db8dcd4-w6vn2


kubectl get pv
kubectl get pvc



kubectl delete -f service-mongodatabase.yaml
kubectl delete -f service-msvc-products.yaml
kubectl delete -f service-msvc-users.yaml
kubectl delete -f service-postgres.yaml
kubectl delete -f deployment-msvc-users.yaml
kubectl delete -f deployment-msvc-products.yaml
kubectl delete -f deployment-postgres.yaml
kubectl delete -f deployment-mongodatabase.yaml
kubectl delete -f secret.yaml
kubectl delete -f configmap.yaml
kubectl delete -f persistent-vol-claim-mongodb.yaml
kubectl delete -f persistent-vol-claim-postgres.yaml
kubectl delete -f persistent-vol-mongodb.yaml
kubectl delete -f persistent-vol-postgres.yaml






kubectl apply -f secret.yaml
kubectl apply -f configmap.yaml
kubectl apply -f persistent-vol-mongodb.yaml
kubectl apply -f persistent-vol-postgres.yaml
kubectl apply -f persistent-vol-claim-mongodb.yaml
kubectl apply -f persistent-vol-claim-postgres.yaml
kubectl apply -f deployment-postgres.yaml
kubectl apply -f deployment-mongodatabase.yaml
kubectl apply -f deployment-msvc-users.yaml
kubectl apply -f deployment-msvc-products.yaml
kubectl apply -f service-mongodatabase.yaml
kubectl apply -f service-msvc-products.yaml
kubectl apply -f service-msvc-users.yaml
kubectl apply -f service-postgres.yaml


minikube service msvc-users --url
minikube service msvc-products --url
